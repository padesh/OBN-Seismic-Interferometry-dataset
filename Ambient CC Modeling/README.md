
## Ocean-bottom Ambient Seismology Interferometry Modeling Example

---
 
Do **NOT** attempt this example until you are familiar with the theory described in:  
[First-order Control Factors for Ocean-bottom Ambient Seismology Interferometric Observations](https://eartharxiv.org/repository/view/8821/)

---

## 0. Overview

This example demonstrates how to construct low-frequency (sub-1 Hz) velocity-component noise cross-correlations recorded on OBNs, generated by ambient pressure sources acting on the ocean surface.  

- The velocity model extends to 11 km depth, with the ocean bottom at 0.8 km.     

---

## 1. Repository Structure

````

README.md                          <- This file
./DATA/                            <- Default input files for the example
./Utils/                           <- Utility scripts for setting up ambient sources and receivers
run_this_example.slurm             <- Main job script
makeCCrsf.slurm                    <- Script to generate cross-correlation cubes in RSF format

````

---

## 2. Usage

This example requires **large HPC resources**.  

- Resource needed: **784 CPU cores**  
- If `mpif90` works on your workstation and you have sufficient cores, you can run this example on your workstation.  
- First config specfem3D Cartesian package (see https://github.com/SPECFEM/specfem3d)  

### Steps:

1. Install the required Python modules (see [Requirements](#4-python-modules-requirements)) in a virtual environment.
2. Edit `./run_this_example.slurm` to load your virtual environment.
3. Submit the job:

   ```bash
   sbatch run_this_example.slurm
   ```

### Notes:

* Modify `run_this_example.slurm` and `sou_rec_setup.sh` as needed for your parameters.
* The commands in `./run_this_example.sh` are self-explanatory.
* Refer to the [SPECFEM3D User Manual](https://github.com/SPECFEM/specfem3d/blob/master/doc/USER_MANUAL/manual_SPECFEM3D_Cartesian.pdf) for additional guidance.

---

## 3. Results

Simulation outputs are saved in:

* `OUTPUT_FILES_step1/`
* `OUTPUT_FILES_step2/`

The seismograms in `OUTPUT_FILES_step2/` contain the cross-correlation components, with the component specified in `sou_rec_setup.sh` (`icomp` parameter).

Cross-correlation cubes in RSF format can be generated using script `makeCCrsf.slurm` (Madagascar package installion required (https://ahay.org/wiki/Installation)) .

---

## 4. Python Modules Requirements

Make sure the following packages are installed in your environment:

* `numpy`
* `mpi4py`
* `scipy`
* `matplotlib`
* `pandas`
* `pyyaml`
* `m8r` (Madagascar API)

---

